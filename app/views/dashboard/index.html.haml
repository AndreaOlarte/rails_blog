.container-fluid.px-4
  .row
    .col-md-3.text-center.bg-light.p-4.pt-5{:style => "min-height: 100vh;"}
      .profile.mb-4
        %h2.m-5.pt-2 My Profile
        - unless current_user.avatar.attachment.nil?
          = image_tag current_user.avatar.variant(resize: "250x250"), class: "mb-3"
        %p
          = current_user.name
        %p
          = current_user.email
        %p
          = current_user.description
        = link_to "Edit Profile", edit_user_registration_path(current_user)
      - if current_user.admin?
        .tags
          %h2 Tags
          = render 'admin/tags/form', tag: @tag
          %table.table.table-hover.mt-3.px-2
            %tbody
              = display_tags(@tags, @tag)
    .col-md-9.p-5
      .d-flex.justify-content-between.align-items-center.px-3.pt-5
        %h1 My Dashboard
        %p.m-2.h5
          = link_to 'Write New Article', new_article_path
      .p-3
        - @articles.each do |article|
          .card.mb-3.p-2
            .card-body
              = link_to article, class: "text-decoration-none" do
                %h4.card-title= article.title
              %p.card-text
                %small.mr-3
                  = fa_icon "user"
                  = article.author.name
                %small.text-muted
                  = fa_icon "calendar"
                  = article.created_at.strftime('%b %-d, %Y')
              %p.card-text.text-justify= truncate(article.content, length: 200, separator: ' ') { link_to 'Continue', article }
              - unless article.tags.empty? 
                .div.d-flex.justify-content-end
                  - article.tags.each do |t|
                    .px-2.py-1.m-1.border.border-danger.rounded.text-danger
                      = t.category
              = link_to edit_article_path(article) do
                = fa_icon "edit"
              |
              = link_to article, method: :delete, data: { confirm: 'Are you sure?' } do
                = fa_icon "trash"
